<!-----------------拱猪大战V1.1------------------------->
<!-------------------------------作者:xxx ---------->
<!-------------------------------ＱＱ:xxx---------->
<!-------------------------------Email:xxx---->
<!-------------------------------时间:2003-10-20-------->
<HTML>
<HEAD>

<title></title>
<style>
	td { font-size:12px; color:yellow }
</style>
</HEAD>
<BODY topmargin="0" leftmargin="0" bgcolor="#008000">

    <IMG height=96 id=m4_c0 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 80px" width=71 >
	<IMG height=96 id=m4_c1 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 100px" width=71 >                             
	<IMG height=96 id=m4_c2 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 120px" width=71 >                             
	<IMG height=96 id=m4_c3 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 140px" width=71 >                             
	<IMG height=96 id=m4_c4 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 160px" width=71 >                             
	<IMG height=96 id=m4_c5 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 180px" width=71 >                             
	<IMG height=96 id=m4_c6 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 200px" width=71 >                             
	<IMG height=96 id=m4_c7 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 220px" width=71 >                             
	<IMG height=96 id=m4_c8 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 240px" width=71 >                             
	<IMG height=96 id=m4_c9 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 260px" width=71 >                             
	<IMG height=96 id=m4_c10 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 280px" width=71 >                             
	<IMG height=96 id=m4_c11 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 300px" width=71 >                             
	<IMG height=96 id=m4_c12 src="images/bk1.gif" style="LEFT: 90px; POSITION: absolute; TOP: 320px" width=71 >                             
                             
                             
    <IMG height=96 id=m3_c0 src="images/bk1.gif" style="LEFT: 250px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c1 src="images/bk1.gif" style="LEFT: 270px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c2 src="images/bk1.gif" style="LEFT: 290px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c3 src="images/bk1.gif" style="LEFT: 310px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c4 src="images/bk1.gif" style="LEFT: 330px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c5 src="images/bk1.gif" style="LEFT: 350px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c6 src="images/bk1.gif" style="LEFT: 370px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c7 src="images/bk1.gif" style="LEFT: 390px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c8 src="images/bk1.gif" style="LEFT: 410px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c9 src="images/bk1.gif" style="LEFT: 430px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c10 src="images/bk1.gif" style="LEFT: 450px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c11 src="images/bk1.gif" style="LEFT: 470px; POSITION: absolute; TOP: 54px" width=71 >                             
	<IMG height=96 id=m3_c12 src="images/bk1.gif" style="LEFT: 490px; POSITION: absolute; TOP: 54px" width=71 >                             
                             
                             
    <IMG height=96 id=m2_c0 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 50px" width=71 >                             
	<IMG height=96 id=m2_c1 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 70px" width=71 >                             
	<IMG height=96 id=m2_c2 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 90px" width=71 >                             
	<IMG height=96 id=m2_c3 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 110px" width=71 >                             
	<IMG height=96 id=m2_c4 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 130px" width=71 >                             
	<IMG height=96 id=m2_c5 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 150px" width=71 >                             
	<IMG height=96 id=m2_c6 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 170px" width=71 >                             
	<IMG height=96 id=m2_c7 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 190px" width=71 >                             
	<IMG height=96 id=m2_c8 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 210px" width=71 >                             
	<IMG height=96 id=m2_c9 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 230px" width=71 >                             
	<IMG height=96 id=m2_c10 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 250px" width=71 >                             
	<IMG height=96 id=m2_c11 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 270px" width=71 >                             
	<IMG height=96 id=m2_c12 src="images/bk1.gif" style="LEFT: 630px; POSITION: absolute; TOP: 290px" width=71 >                             
                             
                             
	<IMG height=96 id=m1_c0 onclick=ManPlay(0) src="images/bk1.gif" style="LEFT: 170px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c1 onclick=ManPlay(1) src="images/bk1.gif" style="LEFT: 190px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c2 onclick=ManPlay(2) src="images/bk1.gif" style="LEFT: 210px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c3 onclick=ManPlay(3) src="images/bk1.gif" style="LEFT: 230px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c4 onclick=ManPlay(4) src="images/bk1.gif" style="LEFT: 250px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c5 onclick=ManPlay(5) src="images/bk1.gif" style="LEFT: 270px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c6 onclick=ManPlay(6) src="images/bk1.gif" style="LEFT: 290px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c7 onclick=ManPlay(7) src="images/bk1.gif" style="LEFT: 310px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c8 onclick=ManPlay(8) src="images/bk1.gif" style="LEFT: 330px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c9 onclick=ManPlay(9) src="images/bk1.gif" style="LEFT: 350px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c10  onclick=ManPlay(10) src="images/bk1.gif" style="LEFT: 370px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c11  onclick=ManPlay(11) src="images/bk1.gif" style="LEFT: 390px; POSITION: absolute; TOP: 370px" width=71 >                             
	<IMG height=96 id=m1_c12  onclick=ManPlay(12) src="images/bk1.gif" style="LEFT: 410px; POSITION: absolute; TOP: 370px" width=71 >                             
                             
	<IMG height=96 id=m1_out src="images/null.gif" style="LEFT: 311px; POSITION: absolute; TOP: 263px" width=71 >                             
	<IMG height=96 id=m2_out src="images/null.gif" style="LEFT: 389px; POSITION: absolute; TOP: 203px" width=71 >                             
	<IMG height=96 id=m3_out src="images/null.gif" style="LEFT: 311px; POSITION: absolute; TOP: 154px" width=71 >                             
	<IMG height=96 id=m4_out src="images/null.gif" style="LEFT: 233px; POSITION: absolute; TOP: 205px" width=71 >                          
	                         
	<div id=player1 style="HEIGHT: 48px; LEFT: 284px; POSITION: absolute; TOP: 473px; WIDTH: 185px">                
	<table border="1" width="100%" cellspacing="1" cellpadding="2" bordercolor="#ffffff">                    
        <tr>                    
          <td width="41%" rowspan="2">                    
            <table border="0" width="100%" cellspacing="0" cellpadding="0">   
              <tr>   
                <td width="50%"><IMG id=p1face border=0 height=32 width=32></td>   
                <td width="50%" id=p1name>  </td>   
              </tr>   
            </table>   
          </td>                  
          <td width="59%">                
            <table border="0" width="100%" cellspacing="0" cellpadding="0">                
              <tr>                
                <td width="35%"><b>总分:</b></td>                
                <td width="65%" id=p1scs>0</td>                
              </tr>                
            </table>                
          </td>                  
        </tr>                  
                
        <tr>                
          <td width="59%">                
            <table border="0" width="100%" cellspacing="0" cellpadding="0">                
              <tr>                
                <td width="34%">得分:</td>                
                <td width="66%" id=p1sc></td>                
              </tr>                
            </table>                
          </td>                  
        </tr>                
      </table>                
	               
	</div>                        
	<DIV id=player2 style="HEIGHT: 190px; LEFT: 705px; POSITION: absolute; TOP: 209px; WIDTH: 57px">             
	<table border="1" width="99%" bordercolor="#ffffff" cellspacing="1" cellpadding="2" height="87">             
        <tr>             
          <td width="100%" height="56">             
            <table border="0" width="100%" cellspacing="0" cellpadding="0">             
              <tr>             
                <td width="100%" align="middle" id=p2name>  </td>             
              </tr>             
              <tr>             
                <td width="100%" >             
                  <p align="center"><IMG id=p2face border=0 height=32 width=32></p></td>             
              </tr>             
            </table>             
          </td>             
        </tr>             
        <tr>             
          <td width="100%" height="26">             
            <table border="0" width="100%" cellspacing="0" cellpadding="0">             
              <tr>             
                <td width="100%" align="middle">             
                  <p align="center"><b>总分</b></p></td>             
              </tr>             
              <tr>             
                <td width="100%" align="middle" id=p2scs>&nbsp;&nbsp;0 </td>             
              </tr>             
            </table>             
          </td>             
        </tr>             
        <tr>             
          <td width="100%" height="5">             
            <table border="0" width="100%" cellspacing="0" cellpadding="0">             
              <tr>             
                <td width="100%" align="middle">             
                  <p align="center">得分</p>            
                </td>            
              </tr>            
              <tr>            
                <td width="100%" align="middle" id=p2sc>&nbsp;&nbsp; </td>            
              </tr>            
            </table>            
          </td>            
        </tr>            
      </table>            
	</DIV>                       
	<DIV id=player3 style="HEIGHT: 48px; LEFT: 285px; POSITION: absolute; TOP: 5px; WIDTH: 196px">                       
      <table border="1" width="100%" cellspacing="1" cellpadding="2" bordercolor="#ffffff">                  
        <tr>                  
          <td width="41%" rowspan="2">                  
            <table border="0" width="100%" cellspacing="0" cellpadding="0">        
              <tr>        
                <td width="50%"><IMG id=p3face border=0 height=32 width=32></td>        
                <td width="50%" valign="center" id=p3name>  </td>        
              </tr>        
            </table>        
          </td>                
          <td width="59%">              
            <table border="0" width="100%" cellspacing="0" cellpadding="0">              
              <tr>              
                <td width="35%"><STRONG>总分:</STRONG></td>              
                <td width="65%" id=p3scs>0</td>              
              </tr>              
            </table>              
          </td>                
        </tr>                
              
        <tr>              
          <td width="59%">              
            <table border="0" width="100%" cellspacing="0" cellpadding="0">              
              <tr>              
                <td width="34%">得分:</td>              
                <td width="66%" id=p3sc></td>              
              </tr>              
            </table>              
          </td>                
        </tr>              
      </table>              
</DIV>                
	<DIV id=player4 style="HEIGHT: 173px; LEFT: 14px; POSITION: absolute; TOP: 119px; WIDTH: 38px">            
      <table border="1" width="129%" bordercolor="#ffffff" cellspacing="1" cellpadding="2" height="87">           
        <tr>           
          <td width="100%" height="56">           
            <table border="0" width="100%" cellspacing="0" cellpadding="0">           
              <tr>           
                <td width="100%" id=p4name align="middle">  </td>           
              </tr>           
              <tr>           
                <td width="100%">           
                  <p align="center"><IMG id=p4face border=0 height=32 width=32></p></td>           
              </tr>           
            </table>           
          </td>           
        </tr>           
        <tr>           
          <td width="100%" height="26">           
            <table border="0" width="100%" cellspacing="0" cellpadding="0">           
              <tr>           
                <td width="100%" align="middle">           
                  <p align="center"><b>总分</b></p></td>           
              </tr>           
              <tr>           
                <td width="100%" align="middle" id=p4scs>0&nbsp;&nbsp; </td>          
              </tr>          
            </table>          
          </td>          
        </tr>          
        <tr>          
          <td width="100%" height="5">          
            <table border="0" width="100%" cellspacing="0" cellpadding="0">          
              <tr>          
                <td width="100%" align="middle">得分</td>          
              </tr>          
              <tr>          
                <td width="100%" align="middle" id=p4sc>&nbsp;&nbsp; </td>          
              </tr>          
            </table>          
          </td>          
        </tr>          
      </table>          
    </DIV>                  
</BODY>                 
<script src="Array.js"></script>             
<script>             
	var Cards = new Array (52);                 
	var ManCards1= new Array (13);                 
	var ManCards2= new Array (13);                 
	var ManCards3= new Array (13);                 
	var ManCards4= new Array (13);               
	var RoundCard= new Array (5);		//存放 当前一轮中 每个玩家 的出牌             
	var Nowplayer;						//当前谁出牌 1-4             
	var Firplayer;						//一轮中第一个出牌者 1-4              
	var Numplayer;						//当前出牌者是第几个出牌的 1-4             
	var Limite;							//此轮中出牌限制 100-400             
	             
	var No;								//此局以出牌数             
	var Scores=new Array (5);			//总得分             
	var Score=new Array(5);				//单局得分             
	             
	var SYSCOMMAND="#Start";             
	       
	var LEVEL="初级" ;       
	var name1="玩家" ;	var name2="昭君" ; var name3="西施"	;	var name4="貂婵"       
	var face1="images/face1.gif";       
	var face2="images/face2.gif";       
	var face3="images/face3.gif";       
	var face4="images/face4.gif";	       
            
Scores[0]=Scores[1]=Scores[2]=Scores[3]=Scores[4]=0;//总分清零        
             
function ShuffleCards()             
{             
	var _c=0;                 
	for ( _a=2; _a<15;_a++)                 
	{                 
		for( _b=1;_b<5;_b++)                  
		{                 
			Cards[_c]=_b*100+_a;                 
			_c++;                 
		}                 
	}             
}//将牌按点数存放在 数组Cards中 分牌             
              
function SeparateCards()             
{             
	for (_a=0;_a<13;_a++)                 
	{                 
		_b=Math.floor( Math.random()*Cards.length );                 
		ManCards1[_a]=Cards[_b];                 
		Cards[_b]=Cards[Cards.length-1];                 
		Cards.length--;                 
	}                 
	for (_a=0;_a<13;_a++)                 
	{                 
		_b=Math.floor( Math.random()*Cards.length );                 
		ManCards2[_a]=Cards[_b];                 
		Cards[_b]=Cards[Cards.length-1];                 
		Cards.length--;                 
	}                
	for (_a=0;_a<13;_a++)                 
	{                 
		_b=Math.floor( Math.random()*Cards.length );                 
		ManCards3[_a]=Cards[_b];                 
		Cards[_b]=Cards[Cards.length-1];                 
		Cards.length--;                 
	}                 
	for (_a=0;_a<13;_a++)                 
	{                 
		_b=Math.floor( Math.random()*Cards.length );                 
		ManCards4[_a]=Cards[_b];                 
		Cards[_b]=Cards[Cards.length-1];                 
		Cards.length--;                 
	}             
	                 
	ManCards1.sort();	ManCards1.reverse();                  
	ManCards2.sort();	ManCards2.reverse();                 
	ManCards3.sort();	ManCards3.reverse();                 
	ManCards4.sort();	ManCards4.reverse();                 
	             
}//为四位玩家进行分牌 存放在 ManCard 1,2,3,4 数组中    //牌排序             
             
function SeeCards(player)             
{             
	for ( _a=0;_a<13;_a++)                 
	{                 
		eval( "document.all.m"+player+"_c"+_a+".src='images/'+"+"ManCards"+player+"[_a]"+"+'.gif'" )                 
	}             
}//显示player的牌             
             
function WhoEat()             
{             
	_arr=new Array(5);             
	_arr[0]=-1; //由于maxno函数不完整 防止出错             
	for ( _a=1; _a<5; _a++)             
	{             
		if (  Math.floor( RoundCard[_a]/100 )*100 == Limite  ) _arr[_a]=RoundCard[_a]-Limite;             
		else _arr[_a]=0;             
	}             
	Firplayer=_arr.maxno();             
	Nowplayer=Firplayer;             
	             
	_s=0;             
	for ( _a=1; _a<5; _a++)             
	{             
		if ( RoundCard[_a]==412 ) _s+=12;             
		if ( Math.floor( RoundCard[_a]/100 )*100==300 ) _s++;             
	}             
	Score[Firplayer]+=_s;             
	             
	eval( "document.all.p"+Firplayer+"sc.innerText="+Score[Firplayer] )             
}//谁吃牌 下轮谁先出 吃几分             
             
function AI(cpu,level)                 
{             
		switch ( level )             
		{             
			case "初级":             
				if ( Numplayer==1 ) {             
					var _arr=new Array();             
					for (_a=0;_a< eval( "ManCards"+cpu+".length" );_a++)             
					{             
						if ( eval( "ManCards"+cpu+"[_a]" )!=412 )     
							_arr[_a]= eval(  ( ""+eval( "ManCards"+cpu+"[_a]" ) ).substr(1,2)  );             
						else _arr[_a]=99;    
					}             
					_b=_arr.minno()             
					Limite=Math.floor(  eval( "ManCards"+cpu+"[_b]" )/100  )*100 //此轮出哪一色  alert(Limite);             
					return _b;             
				}//第一出牌 出最小的牌 ( 猪最后出 )             
				             
				if ( Numplayer==2 || Numplayer==3 ) {             
					if (  eval( "ManCards"+cpu+".ynhave(Limite,Limite+100)" )  )             
					{             
						_arr=new Array();       
						//_arr[0]=_arr[1]=_arr[2]=_arr[3]=_arr[4]=0;       
						for (_a=0;_a<5;_a++)       
						{       
								if (  Math.floor( RoundCard[_a]/100 )*100 == Limite ) _arr[_a]=RoundCard[_a]-Limite;       
								else _arr[_a]=0;       
						}       
						_max=RoundCard[_arr.maxno()];	       
						_which=eval( "ManCards"+cpu+".nearto(_max)");       
						//出最接近 其他玩家的 同色的 大的牌    //不足处(选出猪)    
							       
						if (   Math.floor(  eval( "ManCards"+cpu+"[_which]" )/100  )*100 == Limite   ) return _which;       
						else       
						{       
							_arr2=new Array();       
							for (_a=0;_a< eval( "ManCards"+cpu+".length" );_a++)             
							{             
								if (  Math.floor( eval( "ManCards"+cpu+"[_a]" )/100 )*100 == Limite ) _arr2[_a]=eval( "ManCards"+cpu+"[_a]" );       
								else _arr2[_a]=999;             
							}             
							_b=_arr2.minno();         
							return _b;           
						}       
						//没有最接近的小牌时,出最小的牌       
					}//有此色时             
					else              
					{             
						_c=eval( "ManCards"+cpu+".ynin(412)" ); //_c为猪的位置 无为-1             
						if( _c!=-1 ) return _c; //有猪出猪             
						if( eval( "ManCards"+cpu+".ynhave(300,400)" ) ) return eval( "ManCards"+cpu+".nearto(315)" ) //无猪出分             
						             
						var _arr=new Array();             
						for (_a=0;_a< eval( "ManCards"+cpu+".length" );_a++)             
						{             
							_arr[_a]= eval(  ( ""+eval( "ManCards"+cpu+"[_a]" ) ).substr(1,2)  );             
						}             
						_b=_arr.maxno()             
						return _b             
						//无分出大             
						             
					}//无此色时             
					             
				}              
				//第二,三出牌 有此色:出小于第一张牌下 较大的             
				//            无此色:有猪加猪 无猪加最大分 无分加最大牌             
				             
				if ( Numplayer==4 ) {             
					if (  eval( "ManCards"+cpu+".ynhave(Limite,Limite+100)" )  )        
					{       
						//alert("有此色");       
						if ( RoundCard.ynin(412)!=-1 || RoundCard.ynhave(300,400) )       
						{       
							//alert("有分");       
							_arr=new Array();       
							//_arr[0]=_arr[1]=_arr[2]=_arr[3]=_arr[4]=0;       
							for (_a=0;_a<5;_a++)       
							{       
								if (  Math.floor( RoundCard[_a]/100 )*100 == Limite ) _arr[_a]=RoundCard[_a]-Limite;       
								else _arr[_a]=0;       
							}       
							_max=RoundCard[_arr.maxno()];	       
							_which=eval( "ManCards"+cpu+".nearto(_max)");       
							//出最接近 其他玩家的 同色的 大的牌        
						       
							if (   Math.floor(  eval( "ManCards"+cpu+"[_which]" )/100  )*100 == Limite   ) return _which;       
							else       
							{       
								_arr2=new Array();       
								for (_a=0;_a< eval( "ManCards"+cpu+".length" );_a++)             
								{             
									if (  Math.floor( eval( "ManCards"+cpu+"[_a]" )/100 )*100 == Limite ) _arr2[_a]=eval( "ManCards"+cpu+"[_a]" );       
									else _arr2[_a]=0;             
								}             
								_b=_arr2.maxno();         
								return _b;           
							}//没有比其他玩家小的牌出此色最大的       
						}//其他人出的牌中 有分数情况 出较小的       
						else       
						{       
							//alert("无分");	       
							_arr2=new Array();       
							for (_a=0;_a< eval( "ManCards"+cpu+".length" );_a++)             
							{             
								if (  Math.floor( eval( "ManCards"+cpu+"[_a]" )/100 )*100 == Limite ) _arr2[_a]=eval( "ManCards"+cpu+"[_a]" );       
								else _arr2[_a]=0;             
								
								//if (  eval( "ManCards"+cpu+"[_a]" )==412 ) _arr2[_a]=401; //猪为最后出
							}             
							_b=_arr2.maxno();         
							return _b;       
						}//其他人出的牌中 无分数情况 出最大的  猪除外
					}//有此色时       
					else       
					{       
						//alert("无此色");       
						_c=eval( "ManCards"+cpu+".ynin(412)" ); //_c为猪的位置 无为-1             
						if( _c!=-1 ) return _c; //有猪出猪             
						if( eval( "ManCards"+cpu+".ynhave(300,400)" ) ) return eval( "ManCards"+cpu+".nearto(315)" ) //无猪出分             
						             
						var _arr=new Array();             
						for (_a=0;_a< eval( "ManCards"+cpu+".length" );_a++)             
						{             
							_arr[_a]= eval(  ( ""+eval( "ManCards"+cpu+"[_a]" ) ).substr(1,2)  );             
						}             
						_b=_arr.maxno()             
						return _b             
						//无分出大             
					}//无此色时       
				}              
				//最后出牌 有此色:无分情况下出最大的 有分情况下出最较小的              
				//         无此色:有猪加猪 无猪加最大分 无分加最大牌                 
				break;             
				             
			case "高级":             
				break; //高级AI              
		}             
		return 0;                 
}//电脑出牌函数返回值为 第几张牌               
             
function ComPlay()             
{             
		which=AI(Nowplayer,LEVEL);             
		       
		RoundCard[Nowplayer]=eval("ManCards"+Nowplayer+"[which]");             
		             
		eval ( "document.all.m"+Nowplayer+"_out.src='images/'+ManCards"+Nowplayer+"["+which+"]+'.gif'" );             
		eval ( "ManCards"+Nowplayer+"["+which+"]=ManCards"+Nowplayer+"["+"ManCards"+Nowplayer+".length-1]" );             
		eval ( "ManCards"+Nowplayer+".length--" );             
		eval ( "ManCards"+Nowplayer+".sort()" );             
		eval ( "ManCards"+Nowplayer+".reverse()" );             
		             
		//SeeCards(Nowplayer); //看牌开关        
		eval ( "document.all.m"+Nowplayer+"_c"+eval("ManCards"+Nowplayer+".length")+".style.visibility='hidden'" )             
		             
		Nowplayer++;		if ( Nowplayer>4 ) Nowplayer=1;             
		Numplayer++;		if ( Numplayer>4 ) { SYSCOMMAND="#RoundEnd"; return; }             
		             
		SYSCOMMAND="#Rounding";             
		             
}//电脑出牌             
             
function ManPlay(num)             
{             
		if ( Nowplayer==1)             
		{             
				             
				if ( Firplayer==1 )             
				{             
					Limite=Math.floor( ManCards1[num]/100 )*100 //此轮出哪一色  alert(Limite);             
				}//先出牌的情况             
				else              
				{             
					if ( Math.floor( ManCards1[num]/100 )*100 !=Limite && ManCards1.ynhave(Limite,Limite+100) )              
					{             
						alert("您出错牌了");             
						return;             
					}             
				}//后出牌的情况	             
				document.all.m1_out.src="images/"+ManCards1[num]+".gif"; //在桌上显示出的牌             
			                 
			    RoundCard[1]=ManCards1[num]; //记录已出的牌             
			                 
			    ManCards1[num]=ManCards1[ManCards1.length-1];             
				ManCards1.length--;             
				ManCards1.sort();             
				ManCards1.reverse();             
				//玩家手上持有牌处理             
			                 
				SeeCards(1);             
				eval( "document.all.m1_c"+ManCards1.length+".style.visibility='hidden'" )             
				//显示玩家手上持有牌 隐藏已出的牌             
			                 
				Nowplayer++;		if ( Nowplayer>4 ) Nowplayer=1;             
				Numplayer++;		if ( Numplayer>4 ) { SYSCOMMAND="#RoundEnd"; return; }             
				                 
				SYSCOMMAND="#Rounding";             
			             
		}                 
		else alert("还没轮到您出牌");             
}//人出牌             
             
function Start()             
{             
	SYSCOMMAND="#Busy"        
	   
	document.all.p1name.innerText=name1;      
	document.all.p2name.innerText=name2;      
	document.all.p3name.innerText=name3;      
	document.all.p4name.innerText=name4;      
	        
	document.all.p1face.src=face1;      
	document.all.p2face.src=face2;      
	document.all.p3face.src=face3;      
	document.all.p4face.src=face4;	      
        
    ShuffleCards(); //牌初使化 Cards 相当于洗牌             
	SeparateCards() //给四个玩家分牌             
	SeeCards(1); 	//SeeCards(2);	SeeCards(3);	SeeCards(4); //查看四个玩家的牌             
	    
	for(_a=1;_a<5;_a++)    
	for(_b=0;_b<13;_b++)    
	eval ( "document.all.m"+_a+"_c"+_b+".style.visibility=''" )             
	//显示所有牌的图层(在的牌过程中被隐藏的牌)    
	             
	for( _a=1; _a<5 ; _a++)  if ( eval( "ManCards"+_a+".ynin(403)" ) != -1 ) Firplayer=_a;  //判断谁先出牌 黑桃3 先出             
	             
	No=0;             
	Score[0]=Score[1]=Score[2]=Score[3]=Score[4]=0; //轮分清零       
	document.all.p1sc.innerText=0;       
	document.all.p2sc.innerText=0;       
	document.all.p3sc.innerText=0;       
	document.all.p4sc.innerText=0;               
	    
	Nowplayer=Firplayer;             
	Numplayer=1;             
	             
	SYSCOMMAND="#RoundStart"             
	             
}//初使化变量             
function RoundStart()       
{       
	SYSCOMMAND="#Busy";       
	SYSCOMMAND="#Rounding";       
}       
             
function Rounding()             
{             
	SYSCOMMAND="#Busy";             
	             
	if ( Nowplayer==1 ) return;             
	else ComPlay();	             
             
}             
function RoundEnd()             
{             
	SYSCOMMAND="#Busy";             
	document.all.m1_out.src="images/null.gif"             
	document.all.m2_out.src="images/null.gif"             
	document.all.m3_out.src="images/null.gif"             
	document.all.m4_out.src="images/null.gif"             
	WhoEat();             
	No++; if ( No==13 ) { SYSCOMMAND="#End"; return }             
	       
	RoundCard[0]=RoundCard[1]=RoundCard[2]=RoundCard[3]=RoundCard[4]=0;                   
	Numplayer=1;             
	SYSCOMMAND="#RoundStart";             
}             
             
             
function End()             
{             
	SYSCOMMAND="#Busy";       
	alert("此局结束");             
	       
	if ( Score[1]==25 ) 	{ Scores[1]+=0;   Scores[2]+=25;	Scores[3]+=25;	Scores[4]+=25;	}        
	else	Scores[1]+=Score[1];       
	if ( Score[2]==25 ) 	{ Scores[1]+=25;  Scores[2]+=0;		Scores[3]+=25;	Scores[4]+=25;	}        
	else	Scores[2]+=Score[2];       
	if ( Score[3]==25 ) 	{ Scores[1]+=25;  Scores[2]+=25;	Scores[3]+=0;	Scores[4]+=25;	}        
	else	Scores[3]+=Score[3];       
	if ( Score[4]==25 ) 	{ Scores[1]+=25;  Scores[2]+=25;	Scores[3]+=25;	Scores[4]+=0;	}        
	else	Scores[4]+=Score[4];       
	document.all.p1scs.innerText=Scores[1];       
	document.all.p2scs.innerText=Scores[2];       
	document.all.p3scs.innerText=Scores[3];       
	document.all.p4scs.innerText=Scores[4];       
	
	if ( Scores[1]>99 || Scores[2]>99 || Scores[3]>99 || Scores[4]>99 )
	{
		SYSCOMMAND="#GameOver";
		return;
	}
	       
	SYSCOMMAND="#Start";       
	       
	
}
             
function GameOver()
{
	if ( Scores[1]>99 ) alert("玩家输了");
	if ( Scores[2]>99 ) alert(name2+"输了");
	if ( Scores[3]>99 ) alert(name3+"输了");
	if ( Scores[3]>99 ) alert(name3+"输了");
	window.clearInterval(TIMESYS);
}
             
function SYS()             
{             
	switch (SYSCOMMAND)             
	{             
		case "#Busy":		//函数正在工作中             
				return;             
		case "#Start":		//开始新局             
				Start();             
				break;             
		case "#RoundStart": //开始新一轮       
				RoundStart();       
				break;       
		case "#Rounding":	//一轮出牌中             
				Rounding();             
				break;             
		case "#RoundEnd":	//一轮结束             
				RoundEnd();             
				break;             
		case "#End":		//一局结束             
				End();
				break;
		case "#GameOver":
				GameOver();
				break;
	}             
	             
}             
TIMESYS=window.setInterval("SYS()",500);             
             
</script>              
</HTML>
<!---------------v1.1修改了最后出牌乱出猪的bug-------------------->